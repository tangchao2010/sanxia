
<!DOCTYPE html>
<html>
<head>
	<title>绑定银行卡</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">  <!--删除默认的苹果工具栏和菜单栏-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black"> <!-- 控制状态栏显示样式-->
    <meta name="format-detection" content="telephone=no" /> <!--禁止拨打电话-->
	<link rel="stylesheet" href="../../css/sm/sm.min.css">
	<link rel="stylesheet" href="../../css/sm/mystyle.css">
	<link rel="stylesheet" href="../../css/sm/font-awesome.min.css">
	<link href="../../css/datef.css" rel="stylesheet" />
	<style>
		.list-block #datePlugin ul {
			padding-left: inherit;
			background:none;
		}
		#beginTime{ height:1.2rem; width:1.2rem;
			margin-left:.5rem;}
		#beginTime img{
			width: 1.2rem;
			height:1.2rem;	
		}
		.shareLoan:before{ background:#e7e7e7;}
	</style>
</head>

	<body>
    <div class="page-group">
        <div class="page page-current" >
            <header class="bar bar-nav">
                <a class="icon icon-left pull-left back"></a>
                <h1 class="title">绑定银行卡</h1>
            </header>
            
			<div class="content native-scroll">
            	
                <form id="formd" method="post" action="http://www.baidu.com">
                    <div class="content-block-title">请绑定持卡人的银行卡</div>
                    <div class="list-block">
                        <ul>  
                            <li class="item-content ">
                                    <div class="item-media"></div>
                                    <div class="item-inner">
                                        <div class="item-title label">银行名称</div>
                                        <div class="item-input myregister">
                                            <input type="text" id="bankcard-picker" name="bbankName" value="" placeholder="请选择银行卡"  >
                                       </div>
                                    </div>
                            </li>
                            <li class="item-content">
                                    <div class="item-media"></div>
                                    <div class="item-inner">
                                        <div class="item-title label" >银行卡号</div>
                                       <div class="item-input myregister">
                                            <input  type="tel"  id="bbankCode" name="bbankCode" value="" placeholder="请输入银行卡号"  >
                                       </div>
                                    </div>
                            </li>  
                            <li class="item-content">
                                    <div class="item-media"></div>
                                    <div class="item-inner">
                                        <div class="item-title" style="width:66%;">预留手机号</div>
                                       <div class="item-input myregister">
                                            <input type="tel" id="bbankPhone" name="bbankPhone" value=""  placeholder="请输入预留手机号"  >
                                       </div>
                                    </div>
                            </li>
                            <li class="item-content ">
                                    <div class="item-media"></div>
                                    <div class="item-inner">
                                        <div class="item-title label">银行卡类型</div>
                                        <div class="item-input myregister">
                                            <input type="text" id="bbankStyle" name="bbankStyle" value="" placeholder="请选择银行卡类型"  >
                                       </div>
                                    </div>
                            </li>
                         </ul>
                                                  
                         <ul id="bindatecvv" class="bindatecvv" style=" position:initial;">                         	 
                            <li class="item-content "  style=" position: inherit;">
                            	<div class="item-media"></div>
                            	<div class="item-inner" style="position: inherit;">
                                	<div class="item-title label">有效期</div>
                                	<input style="min-height: 2.2rem; text-align:right; font-size:.65rem; margin-top: -.4rem; margin-bottom: -.35rem;" type="text"  value="" id="bselectdate" name="bselectdate" disabled="disabled" placeholder="请选择日期">
                                     <div class="iitem-after" id="beginTime">
                                        <img  src="../../img/wcb/binddate.png" />
                                     </div>
                                     <div id="datePlugin"></div>
                               	</div>
                            </li>
                            <li class="item-content ">
                                    <div class="item-media"></div>
                                    <div class="item-inner shareLoan">
                                        <div class="item-title label">CVV码</div>
                                        <div class="item-input myregister">
                                            <input type="text" id="bccvcode" name="bccvcode" value="" placeholder="请输入CVV码" maxlength="3">
                                       </div>
                                    </div>
                            </li>
                           		<p class="cvvcode" style=" background:#efeff4;">*&nbsp;CVV码为卡片背面，签名栏后3位数字</p>
                        </ul>
                    </div>
                  
                	<div class="content-block">
                        <div class="row">
                            <div class="col-100"><button id="tcashbc" onclick="merchSubmit()" type="button" class="button button-block button-fill button-big "> 确定</button></div>
                        </div>
					</div>
                    
            	</form>
			</div>
            
		</div>  
    </div>

	<script type='text/javascript' src="../../js/sm/jquery-3.1.min.js" charset='utf-8'></script>
	<script type='text/javascript' src="../../js/sm/mypublic.js" ></script>
	<script type='text/javascript' src="../../js/sm/sm.min.js" ></script>
	<script type="text/javascript" src="../../js/date/iscroll.js" ></script>
    <script type="text/javascript" src="../../js/date/datef.js" ></script>

    <script type="text/javascript">
		 $(function(){
        	$("#beginTime").date({theme:"date"});
		});
	</script>
    
    <script type="text/javascript">
		$("#bankcard-picker").picker({
			toolbarTemplate: 
			'<header class="bar bar-nav">\
		    	<button class="button button-link pull-left"></button>\
		    	<button class="button button-link pull-right close-picker">确定</button>\
		    	<h1 class="title">银行列表</h1>\
		  	</header>',
		    cols: [
				{
				  textAlign: 'center',
				  values: ['中国工商银行', '中国农业银行', '中国银行', '中国建设银行', '交通银行', '招商银行', '国家开发银行', '中国农业发展银行', '中国进出口银行', '平安银行', '中原银行', '华夏银行']
				}
		    ]
		});
		
		$("#bbankStyle").picker({
			toolbarTemplate: 
			'<header class="bar bar-nav">\
		    	<button class="button button-link pull-left"></button>\
		    	<button class="button button-link pull-right close-picker">确定</button>\
		    	<h1 class="title">银行卡类型</h1>\
		  	</header>',
		    cols: [
				{
				  textAlign: 'center',
				  values: ['借记卡', '信用卡']
				}
		    ]
		});
	</script>
       
	<script type="text/javascript">	
		//$("#bbankStyle").bind('input onchange' ,function(){})	
		$("#bindatecvv").hide();
		$("#bbankStyle").change(function(){
			var bbankStyle = $("#bbankStyle").val();
			//alert(bbankStyle);
			if(bbankStyle == '借记卡'){
				$("#bindatecvv").show();
			}else{
				$("#bindatecvv").hide();
			}	
		})
		
		//提交注册
		function merchSubmit(){
				if(checkBindbank()){
					$.alert('银行卡绑定成功!', function () {
						window.location.href='bindmyCard.html';
					});
					
					$('#tcashbc').attr("disabled",true); 
				}
				else{
					return false;	
				}
		}
					
		//检查银行账户信息
		var checkBindbank = function() {
			var bbankName = $('input[name=bbankName]').val();
			var bbankCode = $("#bbankCode").val();
			var bbankPhone = $("#bbankPhone").val();
			var bbankStyle = $("#bbankStyle").val();
			var bselectdate = $("#bselectdate").val();
			var bccvcode = $("#bccvcode").val();
			var ree = /^1(3|4|5|7|8)\d{9}$/;
			
			if(bbankName == null || bbankName == ""){
				$.alert("请选择银行卡！");
				return false;
			}
			if (bbankCode == null || bbankCode == "") {
				$.alert("请输入银行卡号");
				return false;
			}
			if (bbankPhone == null || bbankPhone == "") {
				$.alert("请输入预留手机号");
				return false;
			}if(!ree.test(bbankPhone)){
				$.alert("手机号码格式不正确");
				return false;
			}
			if(bbankStyle == null || bbankStyle == ""){
				$.alert("请选择银行卡类型！");
				return false;
			}
			if (bselectdate == null || bselectdate == "") {
				$.alert("请选择日期");
				return false;
			}
			if (bccvcode == null || bccvcode == "") {
				$.alert("请输入CVV码");
				return false;
			}
			else{
				return true;
			}
		}
	</script>
    
	</body>
</html>