(function($){var drawMenu=function(data,formate){var menuId="clara-menu-"+new Date().getTime(),$menu=$('<ul id="'+menuId+'" class="clara-menu"></ul>'),row;for(var i=0;i<data.length;i++){row=data[i];if(typeof formate=="function"){row=formate.apply(this,[row])}$menu.append("<li data-id="+row["id"]+'><img src="'+row["image"]+'" /></li>')}$("body").append($menu);return $menu};$.claramenu=function(options){var settings=$.extend({"data":[],"formate":function(){}},options);if(settings.data.length<=1){return null}drawMenu.apply(this,[settings.data,settings.formate]).claramenu(settings)};$.fn.claramenu=function(options){var settings=$.extend({"onChange":function(){},"top":10,"left":10,"data":[],"defaultSelected":0,"direction":"left"},options);var maxZ=Math.max.apply(null,$.map($("body > *"),function(e,n){if($(e).css("position")=="absolute"){return parseInt($(e).css("z-index"))||1}}));return this.each(function(){var _this=$(this),_selected=_this.find("li.selected"),_optionsArray=_this.find("li:not('.selected')");if(_selected.size()==0){_optionsArray.each(function(index,element){if($(element).data("id")==settings["defaultSelected"]){_this.append("<li class='selected'><img src=\""+$(element).find("img").attr("src")+'" /></li>');_selected=_this.find("li.selected")}});if(_selected.size()==0){_this.append("<li class='selected'><img src=\""+$(_optionsArray.get(0)).find("img").attr("src")+'" /></li>');_selected=_this.find("li.selected")}}_optionsArray.addClass("options");_selected.on("click",function(){_this.toggleClass("transition")});_optionsArray.on("click",function(){_this.toggleClass("transition");_this.find("li.selected img").attr("src",$(this).find("img").attr("src"));if(typeof settings["onChange"]=="function"){settings["onChange"].apply(_this,[this])}});_this.addClass(settings.direction);_this.css({"position":"absolute","z-index":maxZ+1});switch(settings.direction){case"left":_this.css({top:settings.top,right:"10px"});break;case"right":_this.css({top:settings.top,left:"10px"});break;case"up":_this.css({bottom:"10px",left:settings.left});break;case"down":_this.css({top:"10px",left:settings.left});break}})}})(jQuery);